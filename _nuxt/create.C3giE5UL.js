import{u as de,_ as re,a as ie}from"./poke-card.CqkwI_id.js";import{_ as ce,D as me,I as be,u as pe,r,g as b,B as ve,x as ge,c as p,a as n,b as h,w as ke,d as m,i as e,k,j as N,v as D,F as E,l as fe,m as K,t as V,$ as ye,y as he,o as v,n as L,p as xe,e as _e,q as Ce}from"./entry.DTCBD7d8.js";import{u as we}from"./useHeldItem.BIjhvVOd.js";import{u as Ve}from"./vue.f36acd1f.BcsGpEvu.js";import{C as I}from"./vue-select.es.CHV7giiD.js";import"./pokedexRef.BNpmZCKL.js";const B=R=>(xe("data-v-92809e48"),R=R(),_e(),R),Ie=B(()=>n("ins",{class:"adsbygoogle focusAd",style:{display:"block"},"data-ad-client":"ca-pub-2683150416576260","data-ad-slot":"1399675524","data-ad-format":"auto","data-full-width-responsive":"true"},null,-1)),Me=B(()=>n("div",{class:"page-title"},"製作精靈卡",-1)),Pe=B(()=>n("div",{class:"note"},[n("ul",null,[n("li",null,"基本上尊重大家創意，但為確保品質，若發現太誇張或惡意的卡片將會被刪除！！")])],-1)),Ue={class:"mt-2 md:flex md:gap-2"},Oe={class:"md:max-h-[calc(100vh-150px)] md:flex-1 md:overflow-auto"},Ae=B(()=>n("button",{type:"button",class:"mr-2 mb-2 rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"}," 返回 ",-1)),Se={class:"mt-2"},$e=["onClick"],Ne={class:"mt-2"},De=["onClick"],Le=["onUpdate:modelValue","max","onChange"],Be=["onUpdate:modelValue","max","onChange","onKeyup"],Re={class:"flex py-1"},je=["disabled","onClick"],Ee=["disabled","onClick"],Fe=["disabled","onClick"],He=["disabled","onClick"],Ke=["disabled","onClick"],qe=B(()=>n("label",{for:"message",class:"mb-2 block text-sm font-medium text-gray-900"},"使用說明(約可填150字，請自己檢查有沒有太長被卡掉)",-1)),ze={key:1,class:"lds-dual-ring hidden md:block"},Ge={class:"md:flex-1"},Je={class:"poke-card md:max-w-[600px]"},Qe={class:"flex justify-center md:hidden"},We={key:0,class:"lds-dual-ring"},Xe={__name:"create",setup(R){const{typeTwToEn:q}=me(),{natures:W}=ie(),{heldItems:X}=we(),{createPokeCard:Y}=Ce(),Z=be();Ve({title:"製作精靈卡"});const M=pe(),T=de(),z=[{key:"hp",name:"生命"},{key:"attack",name:"攻擊"},{key:"defense",name:"防禦"},{key:"sAttack",name:"特攻"},{key:"sDefense",name:"特防"},{key:"speed",name:"速度"}],j=r(!1),$=r(""),P=r(""),f=r({name:""}),i=r([]),_=r({name:""}),U=r({name:""}),O=r({name:""}),A=r(""),S=r(""),C=r(!0),l=r({hp:0,attack:0,defense:0,sAttack:0,sDefense:0,speed:0}),ee=b(()=>M.pokes.map(u=>({id:u.id,name:u.name}))),x=b(()=>M.pokedex[f.value.id]||{stat:{}}),oe=b(()=>{const u=x.value.moves||[],t=x.value.learnMoves||[];return[...new Set([...u,...t])].map(y=>({...M.movedex[y]}))}),F=b(()=>(x.value.features||[]).map(t=>({...M.abilitydex[t]}))),te=[{name:"轉生前",value:!1},{name:"轉生後",value:!0}],G=b(()=>x.value.attribute||[]),c=b(()=>l.value.hp+l.value.attack+l.value.defense+l.value.sAttack+l.value.sDefense+l.value.speed);ve(()=>f.value,()=>{x.value.attribute&&(S.value=x.value.attribute[0]||"")});const le=r(null),a=()=>{},H=u=>{if(c.value>d.value){let t=0;z.forEach(s=>{s.key!==u&&(t+=l.value[s.key])}),l.value[u]=d.value-t}},w=b(()=>C.value?252:255),d=b(()=>C.value?630:510);ge(()=>{setTimeout(()=>{const u=document.getElementsByClassName("focusAd");for(let t=0;t<u.length;t++)(adsbygoogle=window.adsbygoogle||[]).push({})},500)});const ne=b(()=>{var u,t,s;return{title:$.value,pokeId:f.value.id,pokeName:f.value.name,moves:i.value.map(y=>y.id).join(","),abilityId:(u=_.value)==null?void 0:u.id,natureId:(t=U.value)==null?void 0:t.id,itemId:(s=O.value)==null?void 0:s.id,...l.value,description:A.value,creator:P.value,type:q[S.value],reincarnated:C.value}}),ue=b(()=>i.value.length>=4?[]:(x.value.moves||[]).map(s=>({...M.movedex[s]})).filter(s=>!i.value.some(y=>y.id===s.id))),se=b(()=>i.value.length>=4?[]:(x.value.learnMoves||[]).map(s=>({...M.movedex[s]})).filter(s=>!i.value.some(y=>y.id===s.id))),J=u=>{i.value.push(u)},Q=async()=>{const u={title:$.value,pokeId:f.value.id,pokeName:f.value.name,moves:i.value.map(s=>s.id).join(","),abilityId:_.value.id,natureId:U.value.id,itemId:O.value.id,...l.value,description:A.value,creator:P.value,type:q[S.value],reincarnated:C.value};j.value=!0,await Y(u),T.needRefresh=!0,j.value=!1;const t={message:"製作完成"};ye.show("alertModal",{options:t}),Z.push({path:"/pokeCard"})},ae=()=>{i.value=[],F.value.length!==0?_.value=F.value[0]:_.value=null,U.value=null,O.value=null,l.value={hp:0,attack:0,defense:0,sAttack:0,sDefense:0,speed:0},A.value="",P.value=""};return(u,t)=>{const s=he("RouterLink"),y=re;return v(),p("div",null,[Ie,Me,Pe,n("div",Ue,[n("div",Oe,[n("div",null,[h(s,{to:"/pokeCard"},{default:ke(()=>[Ae]),_:1})]),m(" 選擇精靈 "),h(e(I),{modelValue:e(f),"onUpdate:modelValue":t[0]||(t[0]=o=>k(f)?f.value=o:null),options:e(ee),label:"name","onOption:selected":ae},null,8,["modelValue","options"]),m(" 精靈稱號 "),n("div",null,[N(n("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>k($)?$.value=o:null),type:"text",class:"rounded-lg border border-gray-300 bg-gray-50 p-2 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500",onInput:a},null,544),[[D,e($)]])]),e(G).length>1?(v(),p(E,{key:0},[m(" 選擇主題色 "),h(e(I),{modelValue:e(S),"onUpdate:modelValue":t[2]||(t[2]=o=>k(S)?S.value=o:null),options:e(G),label:"name","onOption:selected":a},null,8,["modelValue","options"])],64)):fe("",!0),m(" 選擇招式 "),h(e(I),{modelValue:e(i),"onUpdate:modelValue":t[3]||(t[3]=o=>k(i)?i.value=o:null),options:e(oe),multiple:"",label:"name",selectable:()=>e(i).length<4,"onOption:selected":a,"onOption:deselected":a},null,8,["modelValue","options","selectable"]),n("div",Se,[(v(!0),p(E,null,K(e(ue),o=>(v(),p("button",{key:o.id,type:"button",class:"mr-2 mb-2 rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:g=>J(o)},V(o.name),9,$e))),128))]),n("div",Ne,[(v(!0),p(E,null,K(e(se),o=>(v(),p("button",{key:o.id,type:"button",class:"mr-2 mb-2 rounded-lg bg-green-700 px-5 py-2.5 text-sm font-medium text-white hover:bg-green-800 focus:outline-none focus:ring-4 focus:ring-green-300 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800",onClick:g=>J(o)},V(o.name),9,De))),128))]),m(" 選擇特性 "),h(e(I),{modelValue:e(_),"onUpdate:modelValue":t[4]||(t[4]=o=>k(_)?_.value=o:null),options:e(F),label:"name","onOption:selected":a,"onOption:deselected":a},null,8,["modelValue","options"]),m(" 選擇個性 "),h(e(I),{modelValue:e(U),"onUpdate:modelValue":t[5]||(t[5]=o=>k(U)?U.value=o:null),options:e(W),label:"name","onOption:selected":a,"onOption:deselected":a},null,8,["modelValue","options"]),m(" 選擇攜帶物 "),h(e(I),{modelValue:e(O),"onUpdate:modelValue":t[6]||(t[6]=o=>k(O)?O.value=o:null),options:e(X),label:"name","onOption:selected":a,"onOption:deselected":a},null,8,["modelValue","options"]),m(" 轉生狀態 "),h(e(I),{modelValue:e(C),"onUpdate:modelValue":t[7]||(t[7]=o=>k(C)?C.value=o:null),options:te,reduce:o=>o.value,label:"name","onOption:selected":a,"onOption:deselected":a},null,8,["modelValue","reduce"]),m(" 努力值("+V(e(c))+" / "+V(e(d))+") ",1),(v(),p(E,null,K(z,o=>n("div",{key:o.key,class:"w-full px-3"},[m(V(o.name)+" ",1),N(n("input",{"onUpdate:modelValue":g=>e(l)[o.key]=g,type:"range",min:"0",max:e(w),class:"w-full",onChange:()=>H(o.key)},null,40,Le),[[D,e(l)[o.key],void 0,{number:!0}]]),N(n("input",{"onUpdate:modelValue":g=>e(l)[o.key]=g,type:"number",max:e(w),class:"rounded-lg border border-gray-300 bg-gray-50 p-2 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500",onChange:()=>H(o.key),onKeyup:()=>H(o.key)},null,40,Be),[[D,e(l)[o.key],void 0,{number:!0}]]),m(" "+V(` / ${e(w)}`)+" ",1),n("div",Re,[n("button",{type:"button",class:L(["mr-2 mb-2 rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",e(c)+63>e(d)+e(l)[o.key]?"cursor-not-allowed opacity-50":""]),disabled:e(c)+63>e(d)+e(l)[o.key],onClick:g=>e(l)[o.key]=63}," 63 ",10,je),n("button",{type:"button",class:L(["mr-2 mb-2 rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",e(c)+100>e(d)+e(l)[o.key]?"cursor-not-allowed opacity-50":""]),disabled:e(c)+100>e(d)+e(l)[o.key],onClick:g=>e(l)[o.key]=100}," 100 ",10,Ee),n("button",{type:"button",class:L(["mr-2 mb-2 rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",e(c)+150>e(d)+e(l)[o.key]?"cursor-not-allowed opacity-50":""]),disabled:e(c)+150>e(d)+e(l)[o.key],onClick:g=>e(l)[o.key]=150}," 150 ",10,Fe),n("button",{type:"button",class:L(["mr-2 mb-2 rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",e(c)+200>e(d)+e(l)[o.key]?"cursor-not-allowed opacity-50":""]),disabled:e(c)+200>e(d)+e(l)[o.key],onClick:g=>e(l)[o.key]=200}," 200 ",10,He),n("button",{type:"button",class:L(["mr-2 mb-2 rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",e(c)+e(w)>e(d)+e(l)[o.key]?"cursor-not-allowed opacity-50":""]),disabled:e(c)+e(w)>e(d)+e(l)[o.key],onClick:g=>e(l)[o.key]=e(w)},V(e(w)),11,Ke)])])),64)),qe,N(n("textarea",{id:"message","onUpdate:modelValue":t[8]||(t[8]=o=>k(A)?A.value=o:null),rows:"4",class:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500",placeholder:"介紹一下如何使用",onInput:a},null,544),[[D,e(A)]]),m(" 製作人(不想留名可以空白) "),n("div",null,[N(n("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>k(P)?P.value=o:null),type:"text",class:"rounded-lg border border-gray-300 bg-gray-50 p-2 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500",onInput:a},null,544),[[D,e(P)]])]),e(j)?(v(),p("div",ze)):(v(),p("button",{key:2,type:"button",class:"my-2 mr-2 hidden rounded-lg bg-blue-700 px-5 py-2.5 text-lg font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 md:block",onClick:Q}," 送出製作精靈卡 "))]),n("div",Ge,[n("div",Je,[h(y,{ref_key:"myPokeCard",ref:le,"poke-data":e(ne)},null,8,["poke-data"])]),n("div",Qe,[e(j)?(v(),p("div",We)):(v(),p("button",{key:1,type:"button",class:"my-2 mr-2 rounded-lg bg-blue-700 px-5 py-2.5 text-lg font-medium text-white hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:Q}," 送出製作精靈卡 "))])])])])}}},lo=ce(Xe,[["__scopeId","data-v-92809e48"]]);export{lo as default};
